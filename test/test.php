<?php

error_reporting(E_ALL);

require __DIR__ . '/../vendor/autoload.php';

use phpseclib3\Crypt\PublicKeyLoader;
use phpseclib3\Math\BigInteger;
use phpseclib3\Crypt\RSA;

//BigInteger::setEngine('PHP32');

$key = PublicKeyLoader::load('-----BEGIN PRIVATE KEY-----
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
5IRDU9kDjQ1gioKLlxRuvI39VVrm9w==
-----END PRIVATE KEY-----');

print_r(BigInteger::getEngine());

$start = microtime(true);
$key->withPadding(RSA::SIGNATURE_PKCS1)->sign('zzz');
$elapsed = microtime(true) - $start;

echo "took $elapsed seconds\n";

